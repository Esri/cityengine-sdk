<html>

<head>
    <title>envelope Operation</title>
    <link rel="stylesheet" href="../manual_style.css" type="text/css" />
</head>

<body>
<div class="content">

<!-- HEADER (use only on bookchapters) -->

<table summary="" class="header">
	<tr>
		<td align="left" class="helphead_l"><a href="../toc.html"><div class="helplink">&nbsp;</div></a></td>
		<td align="right" class="helphead_r"></td>
	</tr>
</table>

<!-- CONTENT -->

<h1>envelope operation</h1>
        
<h2>Syntax</h2>

<p class="code2">envelope(<span class="cga_opparam">direction, maxHeight, frontBaseHeight, frontAngle</span>)</p>
<p class="code2">envelope(<span class="cga_opparam">direction, maxHeight, frontBaseHeight, frontAngle, backBaseHeight, backAngle</span>)</p>
<p class="code2">envelope(<span class="cga_opparam">direction, maxHeight, frontBaseHeight, frontAngle, backBaseHeight, backAngle,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sideBaseHeight, sideAngle</span>)</p>
<p class="code2">envelope(<span class="cga_opparam">direction, maxHeight, frontBaseHeight, frontAngle, backBaseHeight, backAngle,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightBaseHeight, rightAngle, leftBaseHeight, leftAngle</span>)</p>
<p class="code2">envelope(<span class="cga_opparam">direction, maxHeight, baseHeights, angles</span>)</p>
        
<h2>Parameters</h2>

<ul>
	<li><span class="cga_opparam">direction</span> (selector)<br>Direction along which the envelope is errected (<span class="codelight">normal | world.up</span>).</li>
	<li><span class="cga_opparam">maxHeight</span> (float)<br>Maximum height of the envelope in meters. If this height is reached, the volume is cut and sealed horizontally.</li>
	<li><span class="cga_opparam">frontBaseHeight</span> (float)<br>Base height of the front sides in meters.</li>
	<li><span class="cga_opparam">frontAngle</span> (float)<br>Slope angle of front sides in degrees.</li>
	<li><span class="cga_opparam">backBaseHeight</span> (float)<br>Base height of the back sides in meters.</li>
	<li><span class="cga_opparam">backAngle</span> (float)<br>Slope angle of back sides in degrees.</li>
	<li><span class="cga_opparam">sideBaseHeight</span> (float)<br>Base height of both the right and left sides in meters.</li>
	<li><span class="cga_opparam">sideAngle</span> (float)<br>Slope angle of both the right and left sides in degrees.</li>
	<li><span class="cga_opparam">rightBaseHeight</span> (float)<br>Base height of the right sides in meters.</li>
	<li><span class="cga_opparam">rightAngle</span> (float)<br>Slope angle of right sides in degrees.</li>
	<li><span class="cga_opparam">leftBaseHeight</span> (float)<br>Base height of the left sides in meters.</li>
	<li><span class="cga_opparam">leftAngle</span> (float)<br>Slope angle of left sides in degrees.</li>
	<li><span class="cga_opparam">baseHeights</span> (float[])<br>Base heights, one value per edge.</li>
	<li><span class="cga_opparam">angles</span> (float[])<br>Slope angles, one value per edge.</li>
</ul>

<h2>Description</h2>

<p>Creates a building envelope above each face of the current shape's geometry. Each edge of the face is classified according to the <span class="codelight">street.front, street.back, street.right, street.left, street.side</span> selectors. Sides with the according baseHeights are then built perpendicular to the face.  Finally, sloped planes are added at the top of each side, with the according slope angle.<br>Evaluation of the <span class="codelight">street.xxx</span> selectors is based on the streetWidth attribute, see <a href="https://doc.arcgis.com/en/cityengine/latest/help/help-layers-block-parameters.htm#ESRI_SECTION2_5A91A7408D2240929B5EDA53D6B21FA3" target="_blank">Auto-generated street width attributes</a>. If the attribute is not available, component selection falls back to the <span class="codelight">object.xxx</span> selectors.
<br>
<br>
<b>Per edge control.</b>One version of <span class="codelight">envelope</span> allows for specification of <span class="codelight">baseHeights</span> and <span class="cga_opparam">angles</span> per edge via arrays. The array must be in face-edge order, i.e. the first element is for the first edge of the first face, the second element is for the second edge of the first face, and so on. Shared edges are considered separately for each face. If the array does not contain enough elements, default values (0 for baseHeight and 90 degrees for the angle) are used. This allows to e.g. write<br>
 &nbsp;&nbsp;&nbsp;<span class="codelight">envelope(direction, maxHeight, frontBaseHeight, frontAngle, backBaseHeight, backAngle)</span><br>
as <br>
 &nbsp;&nbsp;&nbsp;<span class="codelight">envelope(direction, maxHeight, </span><br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="codelight">comp(fe) { street.front = frontBaseHeight | street.back = backBaseHeight }, </span><br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="codelight">comp(fe) { street.front = frontAngle      | street.back = backAngle      | all = 90 })</span><br></p>

<p class="piccaptioncentered"><img src="images/envelope_basic_params.png"><br>Basic <span class="codelight">envelope()</span> operation parameters. The <span class="cga_opparam">baseHeight</span> and <span class="cga_opparam">angle</span> parameters of the other sides are analogue.</p>

<p class="piccaptioncentered"><img src="images/street_selectors.png"><br>Example of <span class="codelight">street.front, street.back, street.right, street.left, street.side</span> selectors applied on a lot of a block (with auto-generated streetWidth attributes).</p>
        
<h2>Related</h2>
<ul>
	<li><a class="normw" href="op_extrude.html">extrude operation</a></li>       
	<li><a class="normw" href="op_offset.html">offset operation</a></li>       
	<li><a class="normw" href="op_roofGable.html">roofGable operation</a></li>
	<li><a class="normw" href="op_roofHip.html">roofHip operation</a></li>
	<li><a class="normw" href="op_roofPyramid.html">roofPyramid operation</a></li>
	<li><a class="normw" href="op_roofRidge.html">roofRidge operation</a></li>
	<li><a class="normw" href="op_roofShed.html">roofShed operation</a></li>
	<li><a class="normw" href="op_taper.html">taper operation</a></li>
</ul>

<h2>Examples</h2>
<h3>Street-facing Slope</h3>
        <table summary="">
        <tr>
                    <td >
            <pre class="code3">
Lot-->
   setback(10) { street.front : color(0,1,0) 
                                FrontYard |
                 remainder    : Building }	              

Building-->
   envelope(normal, 50, 15, 30)
			</pre>
</td>
          <tr>
            <td>
            <img src="images/envelope_example_a.png" alt="Envelope example a"/> </td>
            </tr>
            <tr>
            <td>
                <em>The example code above creates a building envelope with a slope of 30 degrees facing the street-side. Eave height is 15 meters. Before creating the envelope, a front yard of 10 meters is split from the lot using the setback operation in conjunction with the <span class="codelight">street.front</span> selector.
                </em></td>
          </tr>
          
                    
  </table>
                
<!-- FOOTER -->

<p class="foot">Copyright &copy;2008-2021 Esri R&amp;D Center Zurich. All rights reserved.</p>				  

<!-- END CENTERED CONTENT -->

</div>
</body>
</html>