<html>

<head>
<title>setback Operation</title>
<link rel="stylesheet" href="../manual_style.css" type="text/css" />
</head>

<body>
<div class="content">

<table summary="" class="header">
	<tr>
		<td align="left" class="helphead_l"><a href="../toc.html"><div class="helplink">&nbsp;</div></a></td>
		<td align="right" class="helphead_r"></td>
	</tr>
</table>

<h1>setback operation</h1>

<h2>Synopsis</h2>

<p class="code2"><span class="cga_op">setback</span>(<span class="cga_opparam">setbackDistance</span>) { selector operator operations | selector operator operations ... }</p>
<p class="code2"><span class="cga_op">setback</span>(<span class="cga_opparam">setbackDistance, uvSet</span>) { selector operator operations | selector operator operations ... }</p>
<br>
<p class="code2"><span class="cga_op">setback</span>(<span class="cga_opparam">setbackDistances</span>) { selector operator operations | selector operator operations ... }</p>
<p class="code2"><span class="cga_op">setback</span>(<span class="cga_opparam">setbackDistances, uvSet</span>) { selector operator operations | selector operator operations ...}</p>

<h2 id="params">Parameters</h2>

<ul>
	<li><span class="cga_opparam">setbackDistance</span> (float)<br>The setback distance.</li>
	<li><span class="cga_opparam">setbackDistances</span> (float[])<br>An array containing setback distances separately for each face edge.</li>
    <li><span class="cga_opparam">uvSet</span> (float)<br>The uv set to use for uv-based selectors. Default is 0.</li>
    <li><span class="cga_opparam">selector</span> (keyword)<br>Semantic selection keyword:
		<table cellspacing="5">
		<tr><td width="30%"><span class="codelight">front, back, left, right, top, bottom, side</span></td><td>The edges' outwards normals in the polygon plane are analyzed by classifying their directions into the corresponding scope quadrants.</td></tr>
		<tr><td><span class="codelight">object.front, object.back, object.left, object.right, object.top, object.bottom, object.side</span></td><td>The edges' outwards normals in the polygon plane are analyzed by classifying their directions into the corresponding object coordinate system quadrants.</td></tr>
		<tr><td><span class="codelight">world.south, world.north, world.west, world.east, world.up, world.down, world.side</span></td><td>The edges' outwards normals in the polygon plane are analyzed by classifying their directions into the corresponding world coordinate system quadrants.</td></tr>
		<tr><td><span class="codelight">street.front, street.back, street.left, street.right</span></td><td>Edges adjacent to a street can be selected with the <span class="codelight">street.front</span> selector, rear edges can be selected with the <span class="codelight">street.back</span> selector, and edges in between front and back can be selected with the <span class="codelight">street.left</span> and <span class="codelight">street.right</span> selectors. <span class="codelight">street.side</span> combines left and right edges. These selectors depend on the availability of the streetWidth attribute map; see <a href="../manual/is/create/block_params.html#streetWidth" class="xref">Auto-generated street width attributes</a>. If the attribute is not available, component selection falls back to the <span class="codelight">object.xxx</span> selectors.</td></tr>
		<tr><td><span class="codelight">uv.left, uv.right, uv.bottom, uv.top</span></td><td>Selects edges based on their uv-coordinates. The outwards-pointing normal of each edge is analyzed to classify the edge with (<span class="codelight">left, right</span>) being the negative and positive u-axis and (<span class="codelight">bottom, top</span>) being the negative and positive v-axis.</td></tr>
		<tr><td><span class="codelight">all</span></td><td>Selects all edges.</td></tr>
		<tr><td><i>index (float)</i></td><td>Selects the <i>index</i>-th component (0-based). Too large and negative indices are modulo wrapped to a correct index.</td></tr>
		<tr><td><span class="codelight">remainder</span></td><td>Selects the remainder of the polygon. <p class="notes">The remainder depends on the selected edges but is always the same, independent of the position of the <span class="codelight">remainder</span> selector in the selector-operator sequence!</p>.</td></tr>
		</table>
	</li>
	<li><span class="cga_opparam">operator</span><br>The operator defines how the setback polygons are used to generate successor shapes. This also applies to shapes with more than one face. Valid operators are:
    <ul>
      <li><span class="codelight">:</span> Each polygon is put into a new shape.</li>
      <li><span class="codelight">=</span> All polygons corresponding to the selector are combined into one new shape.</li>
    </ul>
	</li>
	<li><span class="cga_opparam">operations</span><br>A sequence of CGA operations to execute.</li>
</ul>

<p class="info">The <span class="codelight">setback</span> operation selects a number of edges and sets them back by a given distance. This is somewhat similar to the <a class="normw" href="op_offset.html">polygon offset operation</a>, with the difference that only a subset of the edges can be chosen for the setback.</p>

<p>A common <span class="cga_opparam">setbackDistance</span> can be specified for all edges. Alternatively, a separate distance for each face edge can be specified by passing an array of <span class="cga_opparam">setbackDistances</span> instead of a single <span class="cga_opparam">setbackDistance</span> to the operation. The array must be in face-edge order, i.e. the first element is the distance of the first edge of the first face, the second element is the distance of the second edge of the first face, and so on. Shared edges are considered separately for each face. If the array does not contain enough elements no setback is performed on the respective missing face edges. If the array contains more elements than the number of total face edges the respective setback distances are ignored. Such an array could be constructed using the <a class="cga_op" href="func_comp.html">comp</a> function with the <span class="cga_opparam">compSelector</span> set to <span class="codelight">fe</span> (face edges). The <a class="cga_op" href="op_setbackPerEdge.html">setbackPerEdge</a> operation provides a more convenient way to set individual setback distances without having to construct an array manually.</p> 

<h2>Related</h2>

<ul>
<li><a class="normw" href="op_setbackPerEdge.html">setbackPerEdge operation</a></li>
<li><a class="normw" href="op_setbackToArea.html">setbackToArea operation</a></li>
<li><a class="normw" href="op_comp.html">comp operation</a></li>
<li><a class="normw" href="op_offset.html">offset operation</a></li>
<li><a class="normw" href="op_shapeLUO.html">shapeL operation</a></li>
<li><a class="normw" href="op_shapeLUO.html">shapeU operation</a></li>
<li><a class="normw" href="op_shapeLUO.html">shapeO operation</a></li>
<li><a class="normw" href="func_comp.html">comp function</a></li>
<li><a class="normw" href="func_edgeAttr.html">Edge attribute functions</a></li>
</ul>
                
<h2 id="examples">Examples</h2>

<h3>Setback on Street Front</h3>

<table summary="" class="twocol">
<tr>
	<td class="twocol_l"><br><img src="images/setback_street.front.png" width="298" alt="setback_street.front"/></td>
	<td><pre class="code3">
LotInner --> Lot

Lot --> setback(5) { street.front = Garden   |
                     remainder    : Building }
    	
Garden --> color("#00ff00")

Building --> offset(-3, inside)
             extrude(world.up, rand(5, 15))
	</pre>
	</td>
</tr>
</table>

<h3>Individual distances</h3>

<table summary="" class="twocol">
<tr>
	<td class="twocol_l"><br><img src="images/setback_array_1.png" width="298" alt="setback_array_1"/></td>
	<td><pre class="code3">
// (9)[1,6,1,6,1,6,1,6,1]
dists = comp(fe) { all : case comp.index%2 == 0 : 1
                         else                   : 6 }

Lot --> setback(dists) { all       = Garden   |
                         remainder : Building }
	</pre>
	<em>An array of alternating distances is created using the <a class="cga_op" href="func_comp.html">comp</a> function on a shape with 2 faces. Note that the distances in the array are applied in face-edge order. The first edge of each face is highlighted. The first distance is applied on the first edge of the first face (left) and the 5th distance is applied on the first edge of the second face (right).</em>
	</td>
</tr>
</table>
</table>
<br>
<table summary="" class="twocol">
<tr>
	<td class="twocol_l"><br><img src="images/setback_array_2.png" width="298" alt="setback_array_2"/></td>
	<td><pre class="code3">
// (9)[4,0,2,0.5,5,0.5,2,2,0]
dists = comp(fe) { inside = 0   |
                   front  :
                     case comp.index == 0 : 4
                     else                 : 5 |
                   back   = 2   |
                   side   = 0.5 }

Lot --> setback(dists) { all       = Garden   |
                         remainder : Building }
    </pre>
	<em>In this example the <a class="cga_op" href="func_comp.html">comp</a> function is used with different <span class="cga_opparam">selectors</span> and <span class="cga_opparam">operators</span>.</em>
	</td>
</tr>
</table>
<br>
<table summary="" class="twocol">
<tr>
	<td class="twocol_l"><br><img src="images/setback_array_3.png" width="298" alt="setback_array_3"/></td>
	<td><pre class="code3">
Left --> shapeL(5, 5) { shape     = Garden  |
                        remainder : Building }

// (4)[5,5,0,0]
dists = comp(fe) { front = 5 | right = 5  }

Right --> setback(dists) { all       = Garden   |
                           remainder : Building }
    </pre>
	<em>Left: A left-handed L shape using the <a class="cga_op" href="op_shapeLUO.html">shapeL</a> operation. Right: A right-handed L shape shape using <span class="codelight">setback</span>.</em>
	</td>
</tr>
</table>
<br>
<p>Also see the <a class="cga_op" href="op_setbackPerEdge.html#examples">setbackPerEdge</a> operation for more examples.</p>

<p class="foot">Copyright &copy;2008-2019 Esri R&amp;D Center Zurich. All rights reserved.</p>				  

</div>
</body>
</html>