<html>

<head>
    <title>import</title>
    <link rel="stylesheet" href="../manual_style.css" type="text/css" />
</head>

<body>
<div class="content">

<!-- HEADER (use only on bookchapters) -->
<table summary="" class="header">
	<tr>
		<td align="left" class="helphead_l"><a href="../toc.html"><div class="helplink">&nbsp;</div></a></td>
		<td align="right" class="helphead_r"></td>
	</tr>
</table>

<!-- CONTENT -->

<h1>import</h1>

<h2>Syntax</h2>

<ol>
	<li><p class="code2">import <span class="cga_opparam">id</span> : <span class="cga_opparam">filePath</span></p></li>
	<li><p class="code2">import <span class="cga_opparam">id</span> ( <span class="cga_opparam">styleId</span>, ... , <span class="cga_opparam">styleId</span> ) : <span class="cga_opparam">filePath</span></p></li>
	<li><p class="code2">import <span class="cga_opparam">id</span> : <span class="cga_opparam">filePath</span> ( <span class="cga_opparam">attrId</span>, ... , <span class="cga_opparam">attrId</span> )</p></li>
	<li><p class="code2">import <span class="cga_opparam">id</span> : <span class="cga_opparam">filePath</span> ( <span class="cga_opparam">attrId</span> = <span class="cga_opparam">expression</span>, ... , <span class="cga_opparam">attrId</span> = <span class="cga_opparam">expression</span> )</p></li>
	<li><p class="code2">import <span class="cga_opparam">id</span> : <span class="cga_opparam">filePath</span> ( )</p></li>
</ol>

<h2>Parameters</h2>
<ul>
	<li><span class="cga_opparam">id</span><br/>Unique prefix for the imported rules, attributes and functions.</li>
	<li><span class="cga_opparam">filePath</span> (string)<br/>Absolute or relative path to a CGA rule file (e.g. <span class="codelight">"file.cga"</span>). See <a class="normw" href="cga_assetSearch.html">Asset Search</a> for details about the supported syntax.</li>
</ul>

<h2>Description</h2>

<p>Rules, attributes and functions from an existing rule file can be imported by a rule file by the <span class="codelight">import</span> keyword (syntax 1). Importing a rule file makes all rules, attributes and functions of the <i>imported</i> rule file available prefixed by <span class="cga_opparam">id</span>. If the <i>imported</i> rule file contains multiple styles, by default all styles are imported and visible in the style manager.</p>
		
<p>In order to limit the styles available in an <i>importing</i> rule file, the set of imported styles can be specified by enumerating the imported styles in parenthesis after the import <span class="cga_opparam">id</span> (syntax 2).</p>

<p>By default, attribute values from an <i>importing</i> rule file (e.g. <span class="codelight">height</span> in <span class="codelight">main.cga</span> below) are propagated to the <i>imported</i> rule file (e.g. <span class="codelight">height</span> in <span class="codelight">structure.cga</span> takes its value from <span class="codelight">height</span> in <span class="codelight">main.cga</span> below). In order to disable this default behavior (e.g. because an attribute in an <i>imported</i> rule file has the same name but a different semantic and should therefore not be overwritten), the attributes in an <i>imported</i> rule file can be protected by enumerating them after the rule file (syntax 3).</p>
		
<p>Attributes can not only be protected but an <i>importing</i> rule file can additionally specify a new value for the attribute by redefining the attribute with an expression (syntax 4) where the right hand side <span class="cga_opparam">expression</span> is evaluated in the scope of the <i>importing</i> rule file.</p>

<p>Using empty parentheses (syntax 5) protects all imported attributes. Setting the attribute source of an imported attribute in the inspector to something else than "Rule-defined value" will disable this behavior for that attribute completely and the value will be taken from the designated source instead.</p>

<p>Imports can be annotated to control their attribute presentation in the inspector. See <a href="cga_annotations.html">Annotations</a>.</p>

<h2>Example</h2>

<h3>Combining two facades with a structure</h3>
<table summary="" class="onecol">
<tr>
<td>
<pre class="codecgaborder"><font color="#009900">// facade1.cga</font>

actualFloorHeight = scope.sy/rint(scope.sy/4)
actualTileWidth   = scope.sx/rint(scope.sx/4)

Facade --> setupProjection(0, scope.xy, 8*actualTileWidth, 8*actualFloorHeight)
           set(material.colormap, "facade1.png")
           projectUV(0)
</pre>
</td>
</tr>
<tr>
<td>
<pre class="codecgaborder"><font color="#009900">// facade2.cga</font>

actualFloorHeight = scope.sy/rint(scope.sy/6)
actualTileWidth   = scope.sx/rint(scope.sx/4)

Facade --> setupProjection(0, scope.xy, 8*actualTileWidth, 8*actualFloorHeight)
           set(material.colormap, "facade2.png")
           projectUV(0)
</pre>
</td>
</tr>
<tr>
<td>
<pre class="codecgaborder"><font color="#009900">// structure.cga

// the attribute height will be overridden by the attribute height from main.cga
// if this rule file is included. thus, if this rule file is used standalone,
// the buildings will be of height 100, if this rule file is included by main.cga
// the buildings will be of height 200</font>
attr height = 100

Lot --> extrude(height) Mass

Mass --> comp(f) { side : Facade | top : Roof }
</pre>
</td>
</tr>
<tr>
<td>
<pre class="codecgaborder"><font color="#009900">// main.cga

// define an attribute "height", potentially overriding the same attribute
// in imported rule files</font>
attr height = 200

<font color="#009900">// import facades</font>
import f1 : "facade1.cga"
import f2 : "facade2.cga"

<font color="#009900">// import structure</font>
import st : "structure.cga"

Lot --> st.Lot <font color="#009900">// reference rule "Lot" in structure.cga</font>

<font color="#009900">// define rule "Facade" for structure.cga</font>
st.Facade --> 50%  : f1.Facade <font color="#009900">// reference rule "Facade" in facade1.cga</font>
              else : f2.Facade <font color="#009900">// reference rule "Facade" in facade2.cga</font>
</pre>
</td>
</tr>
</table>

<p class="foot">Copyright &copy;2008-2021 Esri R&amp;D Center Zurich. All rights reserved.</p>

</div>
</body>

</html>
