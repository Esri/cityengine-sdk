<html>

<head>
    <title>cleanupGeometry Operation</title>
    <link rel="stylesheet" href="../manual_style.css" type="text/css" />
</head>

<body>
<div class="content">

<!-- HEADER (use only on bookchapters) -->

<table summary="" class="header">
	<tr>
		<td align="left" class="helphead_l"><a href="../toc.html"><div class="helplink">&nbsp;</div></a></td>
		<td align="right" class="helphead_r"></td>
	</tr>
</table>

<!-- CONTENT -->

<h1>cleanupGeometry operation</h1>

<h2>Syntax</h2>

<p class="code2"><span class="cga_op">cleanupGeometry</span>(<span class="cga_opparam">components</span>, <span class="cga_opparam">tolerance</span>)</p>

<h2>Parameters</h2>

<ul>
	<li><span class="cga_opparam">components</span> (selector)<br>
	What components to clean up:
	<table cellspacing="5">
		<tr><td width="15%"><span class="codelight">vertices</span></td><td>Merges vertices and removes collinear vertices.</td></tr>
		<tr><td><span class="codelight">edges</span></td><td>Merges vertices and removes shared edges between coplanar faces.</td></tr>
		<tr><td><span class="codelight">faces</span></td><td>Merges vertices and removes duplicate faces and degenerate faces with small area.</td></tr>
		<tr><td><span class="codelight">all</span></td><td>Cleans up all components.</td></tr>
	</table>
	</li>
    <li><span class="cga_opparam">tolerance</span> (float)<br>Controls the rigorousness of the cleanup operation. Valid values are in the range [0, 1].
	<table cellspacing="5">
		<tr><td width="15%"><span class="codelight">0</span></td><td>Only cleans up matching components. Vertices must be identical, edges collinear, faces coplanar or with zero area in order to be removed.</td></tr>
		<tr><td><span class="codelight">1</span></td><td>Vertices up to a distance of 1m are merged. Edges with intermediate angles up to 10 degrees are considered collinear. Normals with intermediate angles up to 10 degrees are considered coplanar. Faces with area up to 1m&sup2; are removed.</td></tr>
		<tr><td><span class="codelight">[0, 1]</span></td><td>For values in-between 0 and 1 linear interpolation is applied.</td></tr>
	</table>
    </li>
</ul>

<h2>Description</h2>

<p>The <span class="codelight">cleanupGeometry</span> operation cleans up the current shape's geometry.</p>

<p>The intent of this operation is to optimize the mesh data structure of the geometry without the intent to change the appearance of the model. The polygon and vertex count may be reduced.</p>

<p>The cleanup can be necessary for subsequent CGA operations. For example, <a class="normw" href="op_setNormals.html">setNormals</a> and <a class="normw" href="op_softenNormals.html">softenNormals</a> operations require duplicate vertices to be merged in order to compute vertex normals using adjacent face normals.</p>

<p class="notes">Because discontinuous textures coordinates are preserved cleanup steps could be disabled. In some cases it might be useful to <a class="normw" href="op_deleteUV.html">delete</a> the UV coordinates beforehand.</p>
<p class="notes">Because existing <a href="cga_componentTags.html">component tags</a> are preserved, tagged edges and edges between faces with different tags will not be removed. In some cases it might be useful to <a class="normw" href="op_deleteTags.html">delete</a> tags beforehand. See <a href="cga_componentTags.html#cleanup">this section</a> for more details.</p>
<h2>Related</h2>
<ul>
    <li><a class="normw" href="op_convexify.html">convexify operation</a></li>
    <li><a class="normw" href="op_innerRectangle.html">innerRectangle operation</a></li>
    <li><a class="normw" href="op_deleteUV.html">deleteUV operation</a></li>
    <li><a class="normw" href="op_deleteTags.html">deleteTags operation</a></li>
    <li><a class="normw" href="op_reduceGeometry.html">reduceGeometry operation</a></li>
    <li><a class="normw" href="op_reverseNormals.html">reverseNormals operation</a></li>
    <li><a class="normw" href="op_setNormals.html">setNormals operation</a></li>
	<li><a class="normw" href="op_softenNormals.html">softenNormals operation</a></li>
</ul>

<h2>Examples</h2>

<h3>Cleaning up a triangulated asset</h3>
<table summary="" class="twocol">
<tr>
	<td class="twocol_l"><br/><img src="images/cleanup_a-none.png" alt="Before cleanup"/> </td>
	<td>
	<pre class="code3">

	
	

Init-->
i("myHouse.dae")


	</pre>
	<em>The original asset (464 faces, 758 vertices).</em>
	</td>
</tr>
<tr>
	<td class="twocol_l"><br/><img src="images/cleanup_a-all_0.png" alt="cleanupGeometry(all, 0)"/></td>
	<td>
	<pre class="code3">
	
	
	
	
Init-->
i("myHouse.dae")
cleanupGeometry(all, 0)


	</pre>
	<em>Mild cleanup removes most disturbing edges (190 faces, 752 vertices).</em>
	</td>
</tr>
<tr>
	<td class="twocol_l"><br/><img src="images/cleanup_a-all_0_1.png" alt="cleanupGeometry(all, 0.1)"/></td>
	<td>
	<pre class="code3">
	
	
	
	
	
Init-->
i("myHouse.dae")
cleanupGeometry(all, 0.1)


	</pre>
	<em>Increasing the tolerance gets rid of the remaining nasty edges (146 faces, 616 vertices).</em>
	</td>
</tr>
</table>

<!-- FOOTER -->

<p class="foot">Copyright &copy;2008-2023 Esri R&amp;D Center Zurich. All rights reserved.</p>				  

<!-- END CENTERED CONTENT -->

</div>
</body>
</html>