<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Esri Procedural Runtime: prt::Cache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="esri_prt_55px.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Esri Procedural Runtime
   &#160;<span id="projectnumber">1.10.4051</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>SDK</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classprt_1_1_cache.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="classprt_1_1_cache-members.html">List of all members</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">prt::Cache Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_cache_8h_source.html">Cache.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for prt::Cache:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classprt_1_1_cache__inherit__graph.svg" width="131" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a020dc8dff4e3472571fed593f40eccdf"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">PersistentBlobType</a> { <br/>
&#160;&#160;<a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdfa21dbacf21d4cb667a14002e3d00b45e6">CACHE_TYPE_IMAGE_METADATA</a>, 
<br/>
&#160;&#160;<a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdfa8e985fc4727ed40edfaaae675d3a2bad">CACHE_TYPE_PIXELDATA</a>
<br/>
 }</td></tr>
<tr class="separator:a020dc8dff4e3472571fed593f40eccdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aeb26f522c077c5a4c61d513dce53ea24"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#aeb26f522c077c5a4c61d513dce53ea24">flushAll</a> ()=0</td></tr>
<tr class="separator:aeb26f522c077c5a4c61d513dce53ea24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbc09156293308b739d6f817b94b5c29"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#adbc09156293308b739d6f817b94b5c29">flushContentType</a> (<a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a> type)=0</td></tr>
<tr class="separator:adbc09156293308b739d6f817b94b5c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2c8e1d7f807aaedeeb149db5ba52cd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#a5a2c8e1d7f807aaedeeb149db5ba52cd">flushEntry</a> (<a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a> type, const wchar_t *key)=0</td></tr>
<tr class="separator:a5a2c8e1d7f807aaedeeb149db5ba52cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38b743ee5a3cc5eb3433c68d49f094f6"><td class="memItemLeft" align="right" valign="top">virtual const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#a38b743ee5a3cc5eb3433c68d49f094f6">getPersistentBlob</a> (<a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">PersistentBlobType</a> type, const wchar_t *key, size_t *size) const =0</td></tr>
<tr class="separator:a38b743ee5a3cc5eb3433c68d49f094f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2383024ae3bfb8ed36ac6ef10cee776c"><td class="memItemLeft" align="right" valign="top">virtual const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#a2383024ae3bfb8ed36ac6ef10cee776c">getTransientBlob</a> (<a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a> type, const wchar_t *key) const =0</td></tr>
<tr class="separator:a2383024ae3bfb8ed36ac6ef10cee776c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2948bd4bbfb48d86f2b6e532bbc32ca"><td class="memItemLeft" align="right" valign="top">virtual const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#ad2948bd4bbfb48d86f2b6e532bbc32ca">insertAndGetTransientBlob</a> (<a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a> type, const wchar_t *key, const void *ptr)=0</td></tr>
<tr class="separator:ad2948bd4bbfb48d86f2b6e532bbc32ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff97c1c7936e43ef9f91a6b51bb424fe"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#aff97c1c7936e43ef9f91a6b51bb424fe">insertPersistentBlobAndLock</a> (<a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">PersistentBlobType</a> type, const wchar_t *key, const void *data, size_t size)=0</td></tr>
<tr class="separator:aff97c1c7936e43ef9f91a6b51bb424fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09ca633a92fc8b2ddf2020f3a00eb51e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#a09ca633a92fc8b2ddf2020f3a00eb51e">releasePersistentBlob</a> (<a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">PersistentBlobType</a> type, const wchar_t *key)=0</td></tr>
<tr class="separator:a09ca633a92fc8b2ddf2020f3a00eb51e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e1d3519b0f0045d44d2733ccbd4557"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#a62e1d3519b0f0045d44d2733ccbd4557">releaseTransientBlob</a> (<a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a> type, const wchar_t *key)=0</td></tr>
<tr class="separator:a62e1d3519b0f0045d44d2733ccbd4557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ac2223c59fd73ea116b36adc9db8ad"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#a87ac2223c59fd73ea116b36adc9db8ad">tryLockPersistentBlobs</a> (<a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a> type, const wchar_t *key)=0</td></tr>
<tr class="separator:a87ac2223c59fd73ea116b36adc9db8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a167cf1542480b24cf3debb42ef2db3a5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#a167cf1542480b24cf3debb42ef2db3a5">unlockPersistentBlob</a> (<a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">PersistentBlobType</a> type, const wchar_t *key)=0</td></tr>
<tr class="separator:a167cf1542480b24cf3debb42ef2db3a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a5aa6dc53e793e2bd6299e81cb7118ca7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprt_1_1_cache.html#a5aa6dc53e793e2bd6299e81cb7118ca7">deleteTransientBlob</a> (const void *ptr)</td></tr>
<tr class="separator:a5aa6dc53e793e2bd6299e81cb7118ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classprt_1_1_cache.html">Cache</a> interface is a callback interface which can be implemented by the client.</p>
<p>Procedural Runtime's internal databackend, which resolves URIs to texture/geometry/cgb/material resources, uses this interface to insert and lookup resolved resources.</p>
<p>A cache entry is identified with a unique string (key), typically an URI. There are two major types of cache entries:</p>
<ul>
<li>transient: these are non-serializable, prt-internal resources; the data contains a reference to an internal refcount pointer, size is sizeof(void*)</li>
<li>persistent: these are typed, serializable data blocks; some transient resources are an aggregation of datablocks. This allows for<ul>
<li>redundacy removal</li>
<li>direct insertion of datablocks into the cache from some other source to bypass the resolve step</li>
<li>lazy-loading of datablocks</li>
</ul>
</li>
</ul>
<p>Currently, persistent blobs are only implemented for textures. Persistent blobs can be locked and reserved: Locked means the <a class="el" href="classprt_1_1_cache.html">Cache</a> knows the content (and it's guaranteed that a call to <a class="el" href="classprt_1_1_cache.html#a38b743ee5a3cc5eb3433c68d49f094f6">getPersistentBlob()</a> succeeds). Reserved means the <a class="el" href="classprt_1_1_cache.html">Cache</a> has the content in memory (and a pointer associated to it).</p>
<p>A number of cache implementations is provided in <a class="el" href="classprt_1_1_cache_object.html">CacheObject</a>.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classprt_1_1_cache_object.html">CacheObject</a>, <a class="el" href="namespaceprtx_1_1_data_backend.html">prtx::DataBackend</a> </dd></dl>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a020dc8dff4e3472571fed593f40eccdf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">prt::Cache::PersistentBlobType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Types of persistent blobs. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a020dc8dff4e3472571fed593f40eccdfa21dbacf21d4cb667a14002e3d00b45e6"></a>CACHE_TYPE_IMAGE_METADATA</em>&nbsp;</td><td class="fielddoc">
<pre class="fragment">  uint32_t  Version             // 3
  uint32_t  MD5Hash[4]          // md5 hash of associated pixeldata
  uint32_t  Width               // width of associated pixeldata
  uint32_t  Height              // height of associated pixedata
  uint32_t  Format              // GREY8 = 1, GREY16 = 2, RGB8 = 3, RGBA8 = 4, FLOAT32 = 5
  double    Offset[3]           // georef: offset per channel (default: 0)
  double    Scale[3]            // georef: scale per channel  (default: 1)
  double    NoDataValue[3]      // georef: no data value markers per channel (default: MAX_DOUBLE)
  char      Unit[32]            // georef: semicolon separated strings per channel (default: empty)
  double    GeoTransform[6]     // georef: see GDALDataset::GetGeoTransform() function of GDAL (default: [0 1 0 0 0 1])
  char      ProjectionRef[1024] // georef: "Well-known text" string describing the spacial reference system (default: empty)
</pre> </td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a020dc8dff4e3472571fed593f40eccdfa8e985fc4727ed40edfaaae675d3a2bad"></a>CACHE_TYPE_PIXELDATA</em>&nbsp;</td><td class="fielddoc">
<p>The decoded pixeldata, size = width*height*channels. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a5aa6dc53e793e2bd6299e81cb7118ca7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prt::Cache::deleteTransientBlob </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Call this to tell Procedural Runtime that the <a class="el" href="classprt_1_1_cache.html">Cache</a>'s reference to a transient resource was internally deleted from the cache. This is typically called on flushing an entry or in the <a class="el" href="classprt_1_1_cache.html">Cache</a>'s destructor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>the transient blob to release. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aeb26f522c077c5a4c61d513dce53ea24"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void prt::Cache::flushAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Releases all transient blobs stored in the cache. If a transient blob is not still referenced anywhere else in the Procedural Runtime and references permanent blobs in the cache, the permanent blobs are released from the cache. Is typically called from the client and must be thread-safe.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classprt_1_1_cache.html#adbc09156293308b739d6f817b94b5c29">flushContentType()</a>, <a class="el" href="classprt_1_1_cache.html#a5a2c8e1d7f807aaedeeb149db5ba52cd">flushEntry()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="adbc09156293308b739d6f817b94b5c29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void prt::Cache::flushContentType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Releases all transient blobs of a certain ContentType. If a transient blob is not still referenced anywhere else in the Procedural Runtime and references permanent blobs in the cache, the permanent blobs are released from the cache. Is typically called from the client and must be thread-safe.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classprt_1_1_cache.html#aeb26f522c077c5a4c61d513dce53ea24">flushAll()</a>, <a class="el" href="classprt_1_1_cache.html#a5a2c8e1d7f807aaedeeb149db5ba52cd">flushEntry()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the resource. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5a2c8e1d7f807aaedeeb149db5ba52cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void prt::Cache::flushEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Releases one specific transient blob from the cache. If a transient blob is not still referenced anywhere else in the Procedural Runtime and references permanent blobs in the cache, the permanent blobs are released from the cache. Is typically called from the client and must be thread-safe.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classprt_1_1_cache.html#aeb26f522c077c5a4c61d513dce53ea24">flushAll()</a>, <a class="el" href="classprt_1_1_cache.html#adbc09156293308b739d6f817b94b5c29">flushContentType()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the resource. </td></tr>
    <tr><td class="paramname">key</td><td>Unique string to identify the resource. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a38b743ee5a3cc5eb3433c68d49f094f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const void* prt::Cache::getPersistentBlob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">PersistentBlobType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the pointer to a (locked) persistent blob plus it's size. The pointer is guaranteed to stay valid ("reserved") until <a class="el" href="classprt_1_1_cache.html#a09ca633a92fc8b2ddf2020f3a00eb51e">releasePersistentBlob()</a> is called.</p>
<p>If (type, key) does not refer to a previously locked blob the behaviour is undefined.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">type</td><td>Type of the resource. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">key</td><td>Unique string to identify the resource. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>Pointer to return the blob size in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the persistent blob. </dd></dl>

</div>
</div>
<a class="anchor" id="a2383024ae3bfb8ed36ac6ef10cee776c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const void* prt::Cache::getTransientBlob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If a pointer is returned: is guaranteed to stay valid until <a class="el" href="classprt_1_1_cache.html#a62e1d3519b0f0045d44d2733ccbd4557">releaseTransientBlob()</a> is called. <a class="el" href="classprt_1_1_cache.html#a62e1d3519b0f0045d44d2733ccbd4557">releaseTransientBlob()</a> must be called when the pointer is not used anymore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the resource. </td></tr>
    <tr><td class="paramname">key</td><td>Unique string to identify the resource. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The transient resource if known, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ad2948bd4bbfb48d86f2b6e532bbc32ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const void* prt::Cache::insertAndGetTransientBlob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Inserts a transient blob and returns an equivalent transient blob. This can, but doesn't need to, be the inserted blob. The returned blob is guaranteed to stay valid until <a class="el" href="classprt_1_1_cache.html#a62e1d3519b0f0045d44d2733ccbd4557">releaseTransientBlob()</a> is called. <a class="el" href="classprt_1_1_cache.html#a62e1d3519b0f0045d44d2733ccbd4557">releaseTransientBlob()</a> must be called when the returned pointer is not used anymore. If the return value is different than the passed-in ptr, ptr was not inserted into and will not be used by the cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the resource. </td></tr>
    <tr><td class="paramname">key</td><td>Unique string to identify the resource. </td></tr>
    <tr><td class="paramname">ptr</td><td>Pointer to a transient resource, </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ptr or another, previously inserted pointer to a transient resource with identical permanent blob layout. </dd></dl>

</div>
</div>
<a class="anchor" id="aff97c1c7936e43ef9f91a6b51bb424fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void prt::Cache::insertPersistentBlobAndLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">PersistentBlobType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Inserts a persistent data blob connected to a key and locks it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the resource. </td></tr>
    <tr><td class="paramname">key</td><td>Unique string to identify the resource. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to data to insert. </td></tr>
    <tr><td class="paramname">size</td><td>Size of data to insert in bytes. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a09ca633a92fc8b2ddf2020f3a00eb51e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void prt::Cache::releasePersistentBlob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">PersistentBlobType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Releases the pointer assigned to a persistent blob.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the resource. </td></tr>
    <tr><td class="paramname">key</td><td>Unique string to identify the resource. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a62e1d3519b0f0045d44d2733ccbd4557"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void prt::Cache::releaseTransientBlob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Releases a previously locked transient blob.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the resource. </td></tr>
    <tr><td class="paramname">key</td><td>Unique string to identify the resource. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a87ac2223c59fd73ea116b36adc9db8ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool prt::Cache::tryLockPersistentBlobs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceprt.html#a0bbc8b7c3113196a20860f569f833b2d">ContentType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tries to lock all persistent blobs associated with a (transient) key. If the layout + the permanent blobs are known to the cache, they are locked (i.e. prevented from being deleted from permanent storage).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the resource. </td></tr>
    <tr><td class="paramname">key</td><td>Unique string to identify the resource. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the permanent blobs are known, else false. </dd></dl>

</div>
</div>
<a class="anchor" id="a167cf1542480b24cf3debb42ef2db3a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void prt::Cache::unlockPersistentBlob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classprt_1_1_cache.html#a020dc8dff4e3472571fed593f40eccdf">PersistentBlobType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unlocks a persistent blob. Unlocked blobs can be deleted from persistent storage, reserved pointers stay valid however.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the resource. </td></tr>
    <tr><td class="paramname">key</td><td>Unique string to identify the resource. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_cache_8h_source.html">Cache.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceprt.html">prt</a></li><li class="navelem"><a class="el" href="classprt_1_1_cache.html">Cache</a></li>
    <li class="footer">Generated on Thu May 3 2018 17:43:30 for Esri Procedural Runtime by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
